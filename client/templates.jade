head
    title Facet
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no')
    meta(name='mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='')
    meta(name='format-detection', content='telephone=no')
    link(rel='apple-touch-icon', sizes='57x57', href='/apple-touch-icon-57x57.png')
    link(rel='apple-touch-icon', sizes='60x60', href='/apple-touch-icon-60x60.png')
    link(rel='apple-touch-icon', sizes='72x72', href='/apple-touch-icon-72x72.png')
    link(rel='apple-touch-icon', sizes='76x76', href='/apple-touch-icon-76x76.png')
    link(rel='apple-touch-icon', sizes='114x114', href='/apple-touch-icon-114x114.png')
    link(rel='apple-touch-icon', sizes='120x120', href='/apple-touch-icon-120x120.png')
    link(rel='apple-touch-icon', sizes='144x144', href='/apple-touch-icon-144x144.png')
    link(rel='apple-touch-icon', sizes='152x152', href='/apple-touch-icon-152x152.png')
    link(rel='apple-touch-icon', sizes='180x180', href='/apple-touch-icon-180x180.png')
    link(rel='icon', type='image/png', href='/favicon-32x32.png', sizes='32x32')
    link(rel='icon', type='image/png', href='/favicon-194x194.png', sizes='194x194')
    link(rel='icon', type='image/png', href='/favicon-96x96.png', sizes='96x96')
    link(rel='icon', type='image/png', href='/android-chrome-192x192.png', sizes='192x192')
    link(rel='icon', type='image/png', href='/favicon-16x16.png', sizes='16x16')
    link(rel='manifest', href='/manifest.json')
    meta(name='apple-mobile-web-app-title', content='facet')
    meta(name='application-name', content='facet')
    meta(name='msapplication-TileColor', content='#00a300')
    meta(name='msapplication-TileImage', content='/mstile-144x144.png')
    meta(name='theme-color', content='#ffffff')

body
    +home


template(name='home')
    .ui.center.aligned.segment
        .ui.large.basic.label
            +loginButtons
        if currentUser
            #add.ui.basic.icon.button: i.plus.icon
        // .ui.left.icon.input
        //     i.search.icon
        //     input#search(type='text' placeholder="Search/'clear'" autofocus='')
        if selectedtags
            #cleartags.ui.circular.grey.icon.button
                i.remove.icon
        each selectedtags
            .unselecttag.ui.large.compact.grey.button
                i.minus.icon
                |#{this}
        each globaltags
            .selecttag.ui.large.compact.basic.button
                |#{this.name}
                small (#{this.count})
    each docs
        .ui.segment
            if is_editing
                +edit
            else
                +view


template(name='view')
    .header
        each tags
            .ui.basic.large.label #{this}
    .ui.basic.segment
        |{{nl2br body}}
    .footer
        .ui.basic.label #{when}
        .ui.basic.label by #{author.username}
        if currentUser
            if isAuthor
                .edit.ui.basic.attached.button Edit


template(name='edit')
    each tags
        .ui.big.basic.label
            i.remove.link.removetag.icon
            |#{this}
    .ui.left.icon.small.input
        i.plus.icon
        input#addtag(type='text' autofocus='')
    .ui.segment
        h4.ui.header Suggested Tags
        each unique_suggested_tags
            .ui.compact.button.add_suggested_tag
                i.plus.icon
                |#{this}
    .ui.form
        .field
            #suggest_tags.ui.button Suggest Tags from Body
            textarea#body(rows='5') #{body}
    .actions
        #save.ui.button
            i.check.icon
            |Save
        #delete.ui.icon.button: i.trash.icon